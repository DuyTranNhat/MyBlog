@page "/Admin/Role/AddRole/{id}"
@model Migration_EF.Areas.Users.AddRoleModel;
@{
    ViewData["Title"] = "Add New Role";
}
<h3>Set your password</h3>
<partial name="_StatusMessage" for="StatusMessage" />
<p class="text-info">
    You do not have a local username/password for this site. Add a local
    account so you can log in without an external login.
</p>

@{
    // List<string> roleNames = new List<string>()
    // {
    //     "Role A",
    //     "Role B",
    //     "Role C"
    // };
    // var allRoles = new SelectList(roleNames);
}

<d class="row">
    <div class="col-md-6">
        <form id="set-password-form" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
            <div class="form-group mb-3">
                <label asp-for="RoleNames" class="form-label"></label>
                @Html.ListBoxFor(m => m.RoleNames, Model.allRoles, new {
                    id = "id-select-roles",
                    @class = "form-control"
                })
                <span asp-validation-for="RoleNames" class="text-danger"></span>
            </div>
            
            <button type="submit" class="w-100 btn btn-lg btn-primary">Add New Role</button>
        </form>
            <hr />
            <p>All Claims which @Model.user.UserName currently having from Role:</p>
            @if (Model.claimsInRole.Count > 0)
            {
                <ul>
                    @foreach(var item in Model.claimsInRole)
                    {
                        <li>@item.ClaimType : @item.ClaimValue</li>
                    }
                </ul>
            }
            <p>
                All private Claims Of User @Model.user.UserName
                <a class="btn btn-success" asp-page-handler="AddClaim" asp-page="./EditUserRoleClaim" asp- asp-page-handler="AddClaim" asp-route-userid="@Model.user.Id">Add New</a>
            </p>
            
                <table class="table">
                    <tr>
                            <td>
                               <strong>Claim Of User</strong>
                            </td>
                            <td>
                               <strong>Action</strong>
                            </td>
                        </tr>
                    @foreach (var item in Model.claimsInUserClaims)
                    {
                        <tr>
                            <td>
                                <a asp-page="./EditUserRoleClaim" asp-page-handler="EditClaim" asp-route-claimid="@item.Id">
                                        @item.ClaimType : @item.ClaimValue
                                </a>
                            </td>
                            <td>
                                <a asp-page="./EditUserRoleClaim" asp-page-handler="DeleteClaim"  asp-route-claimid="@item.Id" class="btn btn-danger">Delete</a>
                            </td>
                        </tr>
                    }
                </table>
    </div>
</d iv>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
